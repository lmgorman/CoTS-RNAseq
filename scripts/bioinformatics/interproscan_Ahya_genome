#Running interpro scan on the A. hyacinthus genome for functional annotation


#!/bin/bash
#SBATCH --job-name=annot-Ahya-interpro
#SBATCH --nodes=1
#SBATCH --cpus-per-task=10
#SBATCH --mem=300G
#SBATCH -p uri-cpu #InterProScan doesn't work on gpus 
#SBATCH -G 0
#SBATCH --time=48:00:00
#SBATCH -o annot-Ahya-interpro-%j.out
#SBATCH -e annot-Ahya-interpro-%j.error
#SBATCH -D /data/gorman/project/raw-files

# Load modules
echo "Loading programs" $(date)
module load uri/main
module load InterProScan/5.73-104.0-foss-2024a  

# Define directories
WORKDIR=/work/pi_hputnam_uri_edu/ashuffmyer/cots-gorman/Ahya_ann/interpro
INPUT_FILE=/work/pi_hputnam_uri_edu/refs/Ahyacinthus_genome/Ahyacinthus_genome_V1/Ahyacinthus.chrsV1.fasta
OUTPUT_DIR=${WORKDIR}/output
TEMP_DIR=${WORKDIR}/temp

# Create directories if they don't exist
mkdir -p "$WORKDIR" "$OUTPUT_DIR" "$TEMP_DIR"
cd "$WORKDIR"

# Run InterProScan
echo "Starting InterProScan" $(date)
interproscan.sh \
    --input "$INPUT_FILE" \
    --disable-precalc \
    --output-dir "$OUTPUT_DIR" \
    --tempdir "$TEMP_DIR" \
    --cpu 10 \
    --goterms \
    --pathways
echo "Finished InterProScan" $(date)


#Run the job, type:
sbatch interpro.sh

#Currently not working on either Interpro version - contacted Kevin to troubleshoot 17.04.25

